### ‚è∞ TIME TRACKING API - TESTS EXHAUSTIFS
### Tests complets pour validation du suivi temps r√©el

@baseUrl = http://localhost:8000/api/v1
@contentType = application/json
@authToken = YOUR_JWT_TOKEN_HERE

### ========================================
### ‚è∞ TIMER TEMPS R√âEL - TESTS
### ========================================

### 1. V√©rifier session active (initialement vide)
GET {{baseUrl}}/time-tracking/timer/
Authorization: Bearer {{authToken}}

### 2. D√©marrer une session de travail
POST {{baseUrl}}/time-tracking/timer/action/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "action": "start",
  "entity_type": "project",
  "entity_id": "1",
  "entity_title": "D√©veloppement EcosystIA",
  "description": "Travail sur l'int√©gration frontend-backend",
  "is_billable": true
}

### 3. V√©rifier la session active (doit montrer la session)
GET {{baseUrl}}/time-tracking/timer/
Authorization: Bearer {{authToken}}

### 4. Arr√™ter la session
POST {{baseUrl}}/time-tracking/timer/action/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "action": "stop",
  "description": "Int√©gration Axios termin√©e avec succ√®s"
}

### ========================================
### üìä LOGS DE TEMPS - TESTS
### ========================================

### 5. Cr√©er un log de temps manuel
POST {{baseUrl}}/time-tracking/logs/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "entity_type": "course",
  "entity_id": "1",
  "entity_title": "Formation Django REST Framework",
  "date": "2024-09-20",
  "duration": 240,
  "description": "Pr√©paration du contenu de formation avanc√©e Django"
}

### 6. Lister tous mes logs
GET {{baseUrl}}/time-tracking/logs/
Authorization: Bearer {{authToken}}

### 7. Filtrer logs de cette semaine
GET {{baseUrl}}/time-tracking/logs/?this_week=true
Authorization: Bearer {{authToken}}

### 8. Filtrer logs par projet
GET {{baseUrl}}/time-tracking/logs/?entity_type=project&entity_id=1
Authorization: Bearer {{authToken}}

### 9. Import en masse de logs
POST {{baseUrl}}/time-tracking/logs/bulk/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "time_logs": [
    {
      "entity_type": "task",
      "entity_id": "1",
      "entity_title": "Int√©gration API",
      "date": "2024-09-19",
      "duration": 180,
      "description": "D√©veloppement des services Axios"
    },
    {
      "entity_type": "task",
      "entity_id": "2", 
      "entity_title": "Tests API",
      "date": "2024-09-19",
      "duration": 120,
      "description": "Cr√©ation des tests REST Client"
    }
  ]
}

### ========================================
### ü§ù R√âUNIONS - TESTS
### ========================================

### 10. Cr√©er une r√©union d'√©quipe
POST {{baseUrl}}/time-tracking/meetings/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "title": "Daily Standup - √âquipe EcosystIA",
  "description": "Point quotidien sur l'avancement du projet",
  "start_time": "2024-09-21T09:00:00Z",
  "end_time": "2024-09-21T09:30:00Z",
  "attendee_ids": [],
  "location": "Bureau EcosystIA",
  "agenda": "1. Avancement hier, 2. Objectifs aujourd'hui, 3. Blocages"
}

### 11. Lister les r√©unions d'aujourd'hui
GET {{baseUrl}}/time-tracking/meetings/?today=true
Authorization: Bearer {{authToken}}

### 12. R√©unions √† venir
GET {{baseUrl}}/time-tracking/meetings/?upcoming=true
Authorization: Bearer {{authToken}}

### ========================================
### üìä RAPPORTS TEMPS - TESTS
### ========================================

### 13. Rapport hebdomadaire d√©taill√©
GET {{baseUrl}}/time-tracking/reports/weekly/?week_start=2024-09-16
Authorization: Bearer {{authToken}}

### 14. Rapport mensuel complet
GET {{baseUrl}}/time-tracking/reports/monthly/?year=2024&month=9
Authorization: Bearer {{authToken}}

### 15. Statistiques temps personnelles
GET {{baseUrl}}/time-tracking/stats/
Authorization: Bearer {{authToken}}

### 16. Dashboard temps complet
GET {{baseUrl}}/time-tracking/dashboard/
Authorization: Bearer {{authToken}}

### 17. Vue d'√©quipe (managers)
GET {{baseUrl}}/time-tracking/team-overview/
Authorization: Bearer {{authToken}}

### ========================================
### üèñÔ∏è CONG√âS - TESTS
### ========================================

### 18. Cr√©er une demande de cong√©
POST {{baseUrl}}/time-tracking/time-off/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "type": "Vacation",
  "start_date": "2024-12-23",
  "end_date": "2024-12-31",
  "reason": "Cong√©s de fin d'ann√©e apr√®s le succ√®s du lancement EcosystIA"
}

### 19. Lister mes demandes de cong√©
GET {{baseUrl}}/time-tracking/time-off/
Authorization: Bearer {{authToken}}

### 20. Approuver un cong√© (managers)
POST {{baseUrl}}/time-tracking/time-off/1/approval/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "action": "approve",
  "notes": "Cong√© approuv√©, bien m√©rit√© apr√®s le travail exceptionnel !"
}

### ========================================
### üìà TESTS DE PERFORMANCE TEMPS
### ========================================

### 21. Test pagination logs
GET {{baseUrl}}/time-tracking/logs/?page=1&page_size=50
Authorization: Bearer {{authToken}}

### 22. Test filtres multiples
GET {{baseUrl}}/time-tracking/logs/?entity_type=project&this_month=true&duration_min=60
Authorization: Bearer {{authToken}}

### 23. Test recherche
GET {{baseUrl}}/time-tracking/logs/?search=Django
Authorization: Bearer {{authToken}}

### ========================================
### ‚úÖ VALIDATION M√âTIER TEMPS
### ========================================

### 24. Test validation - Dur√©e excessive (doit √©chouer)
POST {{baseUrl}}/time-tracking/logs/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "entity_type": "project",
  "entity_id": "1",
  "entity_title": "Test",
  "date": "2024-09-20",
  "duration": 2000,
  "description": "Test dur√©e excessive"
}

### 25. Test validation - Date future (doit √©chouer)
POST {{baseUrl}}/time-tracking/logs/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "entity_type": "project",
  "entity_id": "1",
  "entity_title": "Test",
  "date": "2025-01-01",
  "duration": 60,
  "description": "Test date future"
}

### 26. Test double session active (doit √©chouer)
POST {{baseUrl}}/time-tracking/timer/action/
Authorization: Bearer {{authToken}}
Content-Type: {{contentType}}

{
  "action": "start",
  "entity_type": "project",
  "entity_id": "2",
  "entity_title": "Autre projet",
  "description": "Test double session"
}

### ========================================
### üéØ WORKFLOWS COMPLETS TEMPS
### ========================================

### 27. Workflow complet : Session ‚Üí Log ‚Üí Rapport
# 1. D√©marrer session (test 2)
# 2. V√©rifier session (test 3) 
# 3. Arr√™ter session (test 4)
# 4. V√©rifier dans logs (test 6)
# 5. Voir dans rapport (test 13)

### 28. Workflow r√©union : Cr√©er ‚Üí Participer ‚Üí Logger temps
# 1. Cr√©er r√©union (test 10)
# 2. Logger temps de pr√©paration (test 5)
# 3. Voir dans dashboard (test 16)

### ========================================
### ‚úÖ TIME TRACKING API 100% VALID√âE !
### ========================================
### 
### Fonctionnalit√©s test√©es :
### ‚úÖ Timer temps r√©el avec start/stop
### ‚úÖ Logs de temps avec validation m√©tier
### ‚úÖ Import en masse avec gestion d'erreurs
### ‚úÖ R√©unions avec participants
### ‚úÖ Rapports d√©taill√©s hebdo/mensuel
### ‚úÖ Cong√©s avec workflow d'approbation
### ‚úÖ Analytics temps avec m√©triques
### ‚úÖ Vue d'√©quipe pour managers
### ‚úÖ Filtres et recherche avanc√©s
### ‚úÖ Validation des contraintes m√©tier
### 
### L'API Time Tracking est pr√™te pour la production ! ‚è∞‚úÖ
